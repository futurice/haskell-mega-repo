name: hours-api
version: "0"
synopsis: Hours API
description: "Hours API: Actual server and mock"
author: Oleg Grenrus <oleg.grenrus@iki.fi>, Jussi Vaihia <jussi.vaihia@futurice.com>
maintainer: Oleg Grenrus <oleg.grenrus@iki.fi>
license: BSD3
github: futurice/haskell-mega-repo
category: Web
tested-with: GHC==7.10.3, GHC==8.0.1
extra-source-files:
- README.md

default-extensions:
  - DeriveDataTypeable
  - DeriveFoldable
  - DeriveFunctor
  - DeriveGeneric
  - DeriveTraversable
  - ScopedTypeVariables

ghc-options: -Wall
# http://stackoverflow.com/questions/43243322/how-to-link-with-the-gnu-gold-linker-instead-of-ld-in-haskell/43243323#43243323
when:
  condition: os(linux)
  ghc-options: -optl-fuse-ld=gold
  ld-options:  -fuse-ld=gold

library:
  source-dirs: src
  dependencies:
    - base >= 4.8 && < 4.10
    - aeson
    - aeson-compat
    - constraints
    - containers
    - dynmap-cache
    - env-config
    - fum-client
    - futurice-foundation
    - futurice-integrations
    - futurice-prelude
    - futurice-reports
    - futurice-servant
    - generics-sop
    - http-client
    - http-client-tls
    - intervals
    - lens
    - lifted-async
    - log-base
    - lucid
    - monad-control
    - mtl
    - periocron
    - planmill-client
    - postgresql-simple
    - QuickCheck
    - random
    - resource-pool
    - semigroupoids
    - servant
    - servant-lucid
    - servant-server
    - stm
    - swagger2
    - text
    - time
    - transformers
    - unordered-containers
    - vector


executables:
  hours-api-server:
    ghc-options: -threaded -rtsopts
    main: Main.hs
    source-dirs: srv
    dependencies:
      - base
      - hours-api

  hours-mock-server:
    ghc-options: -threaded -rtsopts
    main: Main.hs
    source-dirs: mock
    dependencies:
      - base
      - hours-api
